# ๐ง ุฅุตูุงุญ ูุดุงูู CORS ูุงูู Token

## โ **ุงููุดุงูู ุงูููุชุดูุฉ:**

### 1. **ูุดููุฉ CORS:**
```
Access to XMLHttpRequest at 'http://localhost:3000/api/users/.../role' 
from origin 'http://localhost:5173' has been blocked by CORS policy: 
Method PATCH is not allowed by Access-Control-Allow-Methods in preflight response.
```

### 2. **ูุดููุฉ Token:**
```
:3000/api/users/me:1 Failed to load resource: the server responded with a status of 400 (Bad Request)
dataService.ts:744 โ Invalid token, cleared storage
```

### 3. **ูุดููุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:**
- ุงูุชุทุจูู ูุชููุน: `admin@app.com`
- ุงูุฎุงุฏู ููุดุฆ: `admin@iibchat.com`

## โ **ุงูุญููู ุงููุทุจูุฉ:**

### 1. **ุฅุตูุงุญ CORS ูู server/index.js:**
```javascript
// ูุจู ุงูุฅุตูุงุญ
methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS']

// ุจุนุฏ ุงูุฅุตูุงุญ
methods: ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'OPTIONS']  // โ ุฃุถูู PATCH
```

### 2. **ุชูุญูุฏ ุจูุงูุงุช ุงููุฏูุฑ:**
```javascript
// ุชุบููุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
email: 'admin@app.com'  // โ ุจุฏูุงู ูู admin@iibchat.com

// ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
password: 'admin123'    // โ ุจุฏูุงู ูู Admin123
```

### 3. **ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎูุงุฏู:**
- โ ุฅููุงู ุฌููุน ุนูููุงุช Node.js
- โ ุชุดุบูู ุงูุฎุงุฏู ุงูุฎููู (Port 3000)
- โ ุชุดุบูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Port 5173)

## ๐งช **ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ:**

### **ุชุณุฌูู ุงูุฏุฎูู:**
1. **ุงูุชุญ ุงูุชุทุจูู**: http://localhost:5173
2. **ุงุณุชุฎุฏู ุจูุงูุงุช ุงููุฏูุฑ ุงูุฌุฏูุฏุฉ**:
   - ุงูุจุฑูุฏ: `admin@app.com`
   - ูููุฉ ุงููุฑูุฑ: `admin123`

### **ุงุฎุชุจุงุฑ ุชุบููุฑ ุงูุตูุงุญูุงุช:**
1. **ุงุฐูุจ ูุตูุญุฉ ุงูุฃุนุถุงุก** (Members)
2. **ุงุฎุชุฑ ูุณุชุฎุฏู** (ุบูุฑ ุงููุฏูุฑ)
3. **ุงุถุบุท ุนูู ุฃููููุฉ ุงูุชุญุฑูุฑ** โ๏ธ
4. **ุบููุฑ ุงูุตูุงุญูุฉ** (Manager/Employee)
5. **ุงุถุบุท Save**

## ๐ **ุงูุชุญูู ูู ุงููุฌุงุญ:**

### **ุนูุงูุงุช ุงููุฌุงุญ:**
- โ **ูุง ุชูุฌุฏ ุฃุฎุทุงุก CORS** ูู Console
- โ **ุชุณุฌูู ุฏุฎูู ูุงุฌุญ** ุจุฏูู ุฃุฎุทุงุก token
- โ **ุฑุณุงูุฉ ูุฌุงุญ**: "User role updated successfully!"
- โ **ุชุญุฏูุซ ููุฑู** ููุตูุงุญูุฉ ูู ุงููุงุฌูุฉ

### **ุฅุฐุง ุงุณุชูุฑุช ุงููุดุงูู:**
1. **ุงูุณุญ cache ุงููุชุตูุญ**: Ctrl+Shift+R
2. **ุงูุณุญ localStorage**: 
   ```javascript
   localStorage.clear()
   ```
3. **ุฃุนุฏ ุชุญุฏูุซ ุงูุตูุญุฉ** ุนุฏุฉ ูุฑุงุช

## ๐ **ุญุงูุฉ ุงูุฎูุงุฏู:**
- ๐ **Backend**: http://localhost:3000 โ
- ๐ **Frontend**: http://localhost:5173 โ
- ๐ **API**: http://localhost:3000/api โ

## ๐ **ุจูุงูุงุช ุงูุฏุฎูู ุงููุญุฏุซุฉ:**
- **ุงูุจุฑูุฏ**: `admin@app.com`
- **ูููุฉ ุงููุฑูุฑ**: `admin123`

---
**Status**: โ **ุชู ุงูุฅุตูุงุญ** - ูุดุงูู CORS ูุงูู Token ุชู ุญููุง
**Date**: January 2025 